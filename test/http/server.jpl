(set handler 
    (func [request] 
        (get (let {d:null body:null resp:null}
            (set d (apply .request toDict))
            (print [request .d])
            (set body (fromJSON (get .d body)))
            (print [body .body])
            (set resp (toJSON .body))
            (print [response .resp])
        ) resp)
    )
)

(apply 
    (new HttpServer {addr:":8080" handler:.handler})
    run
)